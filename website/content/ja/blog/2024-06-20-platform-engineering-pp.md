---
title:  2024年のプラットフォームエンジニアリング、業界動向と新たな焦点（内部開発者プラットフォーム「Platform Engineering ++」の包括的提案）
slug:   proposal-platform-engineering-++
date:   2024-06-25 15:21:00 +0000
author: Giulio Roggero
categories:
- Article
tags:
- Community Contribution
- WG Platforms
---

本ブログ記事では、組織間で多様な解釈と実装がなされているプラットフォームエンジニアリングについて考察します。

以下の問いに答えようとしています：*「内部開発者プラットフォームは、セルフサービス型インフラプロビジョニングとアプリケーションデプロイメントに限定されるべきか？」*

組織によるプラットフォームエンジニアリングへのアプローチは様々です：

- インフラプロビジョニング用のセルフサービスツールを構築し、開発者にインフラ管理の自律性を与える組織。
- 開発者体験の向上に注力し、コーディングとデプロイを簡素化する組織
- マーケットプレイス中心のアプローチを採用し、コンテナ・データ・APIなどの再利用可能コンポーネントリポジトリを構築する組織

現在のプラットフォームエンジニアリング実践は多くの面で人々の業務を効率化していますが、注目すべき他の領域も存在します。データ、機械学習、API、セキュリティ、プライバシーなどは、ソフトウェア製品ライフサイクルの改善に不可欠です。これらのチームが既存のプラットフォームエンジニアリング手法から恩恵を受けられるか検討することが不可欠です。

単一側面を超えた視野の拡大により、全ユーザーに対する包括的かつ強化された体験を保証できます。

プラットフォームエンジニアリングは、製品やアプリケーションをエンドユーザーに効果的に届けるため、エンドツーエンドのバリューチェーン全体を包含すべきだと考えます。往々にしてプラットフォームエンジニアリングは「専ら」インフラとDevOpsの簡素化と結び付けられ、開発者向けセルフサービスプラットフォームの提供を主目的とされます。

このような認識では、プラットフォームエンジニアと開発者の間に新たな障壁が生じるリスクがあります。これは過去にIT運用と開発者の間に存在した障壁と同様です。さらに現在では、データ、機械学習、APIなどのエンジニアも考慮する必要があります。

私の見解では、プラットフォームエンジニアリングとそのツールをデジタルアプリケーションの全領域に拡大することは、通常「プラットフォーム」と呼ばれるものの典型的な側面以外においても、価値ある取り組みです。

例えば、プラットフォームの一部として以下も考慮できます：

- 複数チームで再利用可能なデザインシステム
- ライブラリのリポジトリ
- メタデータカタログ
- チーム間の業務協定
- 法的・コンプライアンス要件を保証する一連のガードレール
- アプリケーションが従うべき一連の標準

この拡張を**Platform Engineering ++**と呼ぶことを提案します。中核要素であるインフラストラクチャとDevOpsに加え、データ/機械学習エンジニアリング、そしてソフトウェア構成可能性（API、イベント、マイクロフロントエンド、ライブラリ、およびインナーソースアプローチで再利用・進化可能なソフトウェアアプリケーションのあらゆる側面）を包含するものです。

これにより、アプリケーション開発と管理に対するより包括的かつ効果的なアプローチが実現すると確信しています。この立場のさらなる根拠については、以下の段落で説明します。

## プラットフォームのメタファーとしての導入

人々が本を共有するために持ち寄り、読むために借りる図書館のように、プラットフォームは人々がリソースを共有する場です。デジタル領域においてプラットフォームは仮想図書館として機能し、個人が多様なリソースを共有・アクセスすることを可能にします。
![Library Platform Metaphor](/images/2024-06-20-pelibrary-platform-metaphor.png)

図書館をプラットフォームとして捉えると、書籍・動画・論文などの形で資産が提供されます。図書館はカタログコレクション・閲覧室・カフェといった機能を提供し、利用者は研究助手・ウェブサイト・購読サービスを通じてそれらを利用できます。司書は全てを円滑に運営し、個人・学校・団体といった利用者に対し、セルフサービス体験を提供します。

図書館利用者は単なる読者ではなく、潜在的な執筆者でもあります。図書館で見つけた他の書籍からインスピレーションを得たり、事実を収集したり、論文を構築したりして、新たな作品を生み出すことができます。

## 内部開発者プラットフォーム

この比喩において、司書はプラットフォームエンジニアに例えられます。彼らの主な目的は、プラットフォーム利用者が最高水準のサービスを受け、プラットフォームとのやり取りにおいて快適な体験を得られるようにすることです。

比喩の世界では、書籍は様々なリソースやツールに例えられます：

- 必要なソフトウェアと設定を全て備えたKubernetesクラスター
- インフラストラクチャリソースを作成するCrossplane CRD
- データストリーミングに使用されるKafkaトピック
- 利用可能なデータプロダクト
- トレースIDを含む適切な形式でのロギング用に設計されたソフトウェアライブラリ
- マイクロフロントエンドを構築するためのWebコンポーネントライブラリ
- デジタル決済プロバイダーを介した支払いを開始するためのAPI
- エンドユーザーがアクセス可能な完全なアプリケーション。

ライブラリの機能には以下のようなものがあります：

- 利用可能かつ組み込み可能な全リソースを一覧表示するサービスカタログ。
- 新規ソフトウェア要素（インフラストラクチャ、アプリケーション等）を作成するセルフサービスUI。
- 本番環境のライブログを閲覧するコマンドラインインターフェース。
- マイクロサービスのメトリクスを確認する監視システム。
- チームメトリクスに関する情報を収集するスコアカード一式。

このライブラリ（私は**内部プラットフォーム**、または内部開発者プラットフォームと呼んでいます。詳細は次項参照）こそが、あらゆる技術的魔法が起きる場所です。**プラットフォームエンジニア**がこのプラットフォームを管理し、すべての内部プラットフォームユーザーが卓越した体験を得られるよう保証します。彼らのアプローチはプロダクト志向であり、シームレスで直感的なユーザー体験の提供に焦点を当てています。

プラットフォーム利用者の使用パターンや組織固有の要件に応じて、プラットフォームエンジニアは必要なサービスを提供できるようプラットフォームを微調整します。

プラットフォームとは、リソース（ここでは「アイテム」と同義語として扱います）が体系的に整理・提供される仮想空間です。時間利用を最適化することで、より多くのリソースが利用可能になります。

この比喩における書籍に相当するアイテムを効果的に活用することで、組織は革新的なソリューションを創出し、業務を最適化し、競争優位性を獲得できます。
![Platform High Level View](/images/2024-06-20-platform-zoom-out.png)

内部プラットフォームのプラットフォーム機能内では、機能プロバイダーがインフラストラクチャ、DevOpsツールチェーン、SaaSサービス、ツールなど、プラットフォームエンジニアによって組織化され一貫して管理される一連の基本リソース（アイテム）を提供します。

各機能はプラットフォームのアイテムを構成し、以下の特徴を持ちます：

- **定義**：入力、出力、設定可能な動作、メトリクス、ドキュメントを記述
- **ライフサイクル**：開発、テスト、デプロイ、運用、廃止を含むライフサイクルを経る
- **消費と構成**：アイテムは消費・構成され、より複雑なアプリケーションを生成したり、他の消費対象アイテムとなる

プロダクトチームは、ユーザーインターフェース、コマンドライン、APIを通じてこれらのアイテムを利用できます。AIエージェントはチームの操作簡素化を支援し、アイテムは対応するドキュメントと共にカタログに整理されます。
![Platform High Level View with Loop](/images/2024-06-20-platform-zoom-out-loop.png)

この連携の結果、新たなアプリケーションが生成されます。これらのアプリケーションは生アセットへ変換可能であり、他のチームが繰り返し再利用することで組織のDevXを強化します。

このサイクルはソフトウェア開発における循環型経済と見なせ、リソースが継続的に再利用・転用されることで、より効率的で持続可能な開発プロセスが実現します。

## プラットフォームアイテムのライフサイクル

プラットフォームアイテムには複数の種類がありますが、共通の特徴を備えています：

- プレーンテキストファイルで記述される（複数のフォーマットが台頭しており、将来的には標準化されることを期待しています）
- 相互に関連付けが可能
- プロダクトチームやアプリケーションチームが利用できるよう、作成、出荷、実行、運用、カタログ化というライフサイクルを経る。
![Platform Resources Lifecycle](/images/2024-06-20-platform-lifecycle.png)

ユーザーはUIやCLI、タスクを自動化するソフトウェア、LLMベースのAIエージェントを通じてシステムと対話できる点が重要です。

アプリケーションを実行するために必要な動作や関係性の記述をすべて含む包括的な内部プラットフォームにアクセスできる場合、AIコンパニオンがどれほど有益か想像してみてください。

アイテムの検索、設定、本番環境でのリリース・運用といったタスクを、AIとの簡単な会話を通じて簡素化するコンパニオンを想像してください。このコンパニオンはワークフローを大幅に効率化し、全体的な生産性を向上させます。

これを**「対話型DevX」**と呼ぶことを提案します。次回のブログ記事ではこの概念に焦点を当てます。

## 内部開発者プラットフォームか、プラットフォームの集合体か、それとも内部プラットフォームか？

内部開発者プラットフォームを「複数のプラットフォームの集合体」と表現すべきか、それとも「単一のプラットフォーム」と捉えるべきか、判断に迷っています。これは[オープンな議論](https://github.com/cncf/tag-app-delivery/issues/586)であり、皆様の意見やアイデアをお待ちしています。

名称は重要ですが、本記事では名称ではなく内容に焦点を当てます。tag-app-delivery（https://github.com/cncf/tag-app-delivery）コミュニティの皆様と共に標準的な命名規則を確立できれば幸いです。

本記事の冒頭で述べた通り、プラットフォームエンジニアリングはインフラストラクチャを超えた概念であり、DevOpsの進化形ではなく、アプリケーション・データ・API・機械学習モデルといったソフトウェアアイテムを創出・提供・運用する人々の認知負荷を軽減する手法です。

私が観察する傾向として、各ソフトウェアアイテムには固有のプラットフォームが存在します。しかし、これらのプラットフォームにおけるユーザー体験は次第に類似しつつあります。これは、全てのソフトウェアプラットフォームが単一のプラットフォーム、すなわち「プラットフォームのプラットフォーム」へと収束する可能性を示唆しています。

内部プラットフォーム内のアイテムは、以下の異なるタイプに分類されます：

- **インフラストラクチャリソース**：アプリケーションやサービスを支える基盤となるハードウェア・ソフトウェアコンポーネントを指します。物理サーバー、仮想マシン、コンテナ、クラウドプラットフォーム、データストア、データベース、機械学習ランタイムなどが含まれます
- **DevOpsまたは開発者プラットフォームリソース**：ツールチェーンを定義・実行するための全ツールに加え、ワークロード、データ、API、イベント、実行時AIモデルの運用・監視ツール
- **データ、イベント、APIリソース**：データは多くの組織にとって重要な資産です。構造化、非構造化、半構造化データが存在し、様々なソースから取得されます。静止状態または移動中のデータが存在します。ポリシーによって更新され、イベントを発行する場合もあります
- **機械学習（ML）およびAIリソース**：機械学習モデルは、データから学習し予測を行うアルゴリズムです。モデルの定義、トレーニング、デプロイ、改善が可能です
- **コンポーザブルリソース**：アイテムはオーケストレーションまたはコレオグラフィーが可能です。アイテムの種類に応じて、SagasやMicro Frontend構成など異なるパターンを使用できます；コンポーザブルアイテムは、コンポジションを可能にするツールです
- **DevXリソース**: DevXをプロダクトリソースとして（内部マーケットプレイスとソフトウェアカタログ）: 内部プラットフォームの各アイテムは他者にとって貴重な資産となり得ます。それらのアイテム向けマーケットプレイスと、そのライフサイクル管理手段（作成、公開、キュレーション、消費、レビュー）を提供することは、ソフトウェア循環経済の構築に関連します
- **チームコラボレーションリソース**: チームは内部プラットフォーム内で連携し、コミュニケーション促進やワークフロー整理のために様々なアイテムを活用します。これには課題管理、バックログ、ドキュメントなどが含まれます。効果的なコラボレーションにはプラットフォーム自体の理解が不可欠です。

内部プラットフォームの構成要素を分解して図解できます。
![Platform Full Diagram](/images/2024-06-20-platform-full.png)

**内部プラットフォーム**は、仮想マシン（VM）、Kubernetes as a Serviceクラスター、Function Platform as a Serviceツールなどの「生の」資産をランタイムリソースとして取得します。

DevOpsツールは、リソースとコードライフサイクルの管理に不可欠であり、可観測性、セキュリティ、ID管理サービスと並んで基盤となる柱を形成します。NoSQLやSQLデータベース、データストリーム、オブジェクトストレージなどのデータストアは、アプリケーション開発で一般的に利用されます。

さらに、LLMモデルはAPI経由でサービスとして、あるいはランタイムに組み込まれる形で頻繁に活用され、チームが開発するアプリケーションの機能強化に寄与します。Salesforce、Dynamics 365、SAPなどのSaaSアプリケーションは、多様な顧客情報や製品情報の中心ハブとして機能し、クラウドネイティブアプリケーション開発において重要な役割を果たします。

全ての機能は**Infrastructure as Code（IaC）**アプローチで管理され、IaCマニフェストはライフサイクル（コード化、デプロイ、実行、運用、チーム連携の組織化）に沿って管理されます。

このリソースライフサイクルのアプローチは、開発者、インフラストラクチャ、アプリケーションオーケストレーション（API、イベント、フロー）、機械学習、データといった異なる種類のプラットフォーム要素間で共有されます。これらは全て、相互接続されデータベースクラスターやセキュリティポリシーなどのリソースを共有し得る**内部プラットフォーム**内のプラットフォームです。

これらのアイテムの記述子はマニフェストであり、**アプリケーション・アズ・コード**（AaC）の概念に集約されます：インフラストラクチャの望ましい状態を記述するのと同じアプローチで、クラウドネイティブアプリケーションを構成する全プラットフォームのアイテムの望ましい状態を記述します。

**内部マーケットプレイス**内には以下が定義される：全プラットフォーム要素向けの再利用可能な設計図、再利用可能なソフトウェアカタログ、各チームが提供する他のチームの構築ブロックとなり得るあらゆる要素。このマーケットプレイスにより**プラットフォーム構成可能性**戦略を実現できます。

内部プラットフォームはユーザーインターフェース（UI）やコマンドラインインターフェース（CLI）を含む多様なインターフェースを提供します。さらに、ユーザーはAPIを介してプログラム的にプラットフォームとやり取りできます。**AI**は**コンパニオン**として機能します。IaCおよびAaCマニフェストはLLMへのコンテキストとして提供され、AIはプラットフォームユーザーのタスクを簡素化します。これらのタスクには、リソースの発見、マイクロサービスおよびリソースのトラブルシューティング、新規リソースの作成が含まれます。

**Platform Engineering++**は、包括的アプローチで内部プラットフォームに焦点を当てるソフトウェアエンジニアリング分野です。

## 結論

この**Platform Engineering++**パラダイムを採用することで、**Platform Engineeringイニシアチブの投資対効果（ROI）**が向上すると確信しています。プラットフォームがビジネスアプリケーションの基盤となり、チーム間の障壁が解消されるためです。その結果、すべてのチームがその上に構築されたエンドツーエンドアプリケーションを統一的な視点で把握できるようになります。

今回はここまでとし、フィードバックをお願いします :-)。ご意見をお聞かせください。興味のある方は、イシュー https://github.com/cncf/tag-app-delivery/issues/586 にコメントを残し、CNCF wg-platforms ワーキンググループにご参加ください。

この旅は始まったばかりです！

## 参考文献

本ブログ記事において「プラットフォーム」と表記する場合、特に「内部開発者プラットフォーム」、あるいは私が好んで用いる「**内部プラットフォーム**」を指します。これらのプラットフォームは開発者専用ではなく、データ、機械学習、クラウド、その他のエンジニアも包含するからです。これらの内部プラットフォームは、Uber、Airbnb、Netflixなどのビジネスプラットフォームとは区別することが重要です。内部プラットフォームは、組織がビジネスプラットフォームを構築・運用するのを支援します。例えば、Spotifyは内部開発者ポータルとしてBackstageを構築し、Spotifyの消費者向けプラットフォームを運用するための内部プラットフォームを開発するために追加ツールを組み込んでいます。

なお、本ブログ記事で議論する内容の一部は既に以下の論文で定義されています：

- CNCFプラットフォーム白書 (https://github.com/Cloud-Native-Platform-Engineering/cnpe-community/blob/main/platforms-whitepaper/v1/index.md)
- プラットフォーム用語集（https://github.com/Cloud-Native-Platform-Engineering/cnpe-community/blob/main/platforms-wg/glossary/_index.md）
- プラットフォームエンジニアリング成熟度モデル (https://github.com/Cloud-Native-Platform-Engineering/cnpe-community/blob/main/platforms-maturity-model/v1/index.md)
- プラットフォーム・オブ・プラットフォーム構想 (https://github.com/cncf/tag-app-delivery/issues/542)

このブログがブレインストーミングの一助となれば幸いです。

## 謝辞

本記事はCNCF TAG App Deliveryコミュニティ向けに執筆したオリジナルブログ記事です。お楽しみいただければ幸いです。

オープンな議論と包括性を育む仮想の場を提供してくださったCNCF TAG App Deliveryコミュニティに心から感謝します。

_本稿をレビューしてくださった皆様に特に感謝申し上げます！ Atulpriya Sharma、Lou Bichard、Tyler Pate、Abby Bangser、Stefan Daugaard Poulsen、Chris Plank、Marsh Gardiner、Rob White、David Stengleinの各氏による洞察に富んだレビューに深く感謝いたします。_
